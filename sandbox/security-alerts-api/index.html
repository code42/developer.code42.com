
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="../../images/favicon-430ccdd6.ico" rel="icon" type="image/ico" />
    <title>Security Alerts API</title>
    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="../../stylesheets/screen-6a119659.css" rel="stylesheet" media="screen" />
    <link href="../../stylesheets/print-951aa15b.css" rel="stylesheet" media="print" />
    <link rel="stylesheet" href="https://use.typekit.net/sxu2uqu.css">
      <script src="../../javascripts/all-0c8f7524.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="sandbox sandbox_security-alerts-api sandbox_security-alerts-api_index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../images/navbar.png" alt="" />
      </span>
    </a>
    <nav class="top-nav">
    <div class="nav-logo">
        <a href="/sandbox">
            <img src="../../images/logo_developers-eb7c289e.svg" class="logo" alt="" />
        </a>
    </div>
    <div class="nav-menu">
        <div class="nav-item">
            <a href="#">Use Cases</a>
            <ul class="drop-menu">
                <li><a href="/sandbox/track-hre-file-activity/">High Risk Employee</a></li>
            </ul>
        </div>
        <div class="nav-item">
            <a href="#">Guides</a>
            <ul class="drop-menu">
                <li><a href="/sandbox/detection-list-management-api/">Detection List Mgmt</a></li>
                <li><a href="/sandbox/forensic-search-api/">Forensic Search</a></li>
                <li><a href="/sandbox/security-alerts-api/">Security Alerts</a></li>
            </ul>
        </div>
        <div class="nav-item">
            <a href="#">APIs & SDK</a>
            <ul class="drop-menu">
                <li><a href="/sandbox/api">API Reference</a></li>
                <li><a href="https://py42docs.code42.com" target="_blank">Py42</a></li>
                <li><a href="https://clidocs.code42.com" target="_blank">CLI</a></li>
            </ul>
        </div>
    </ul>
</nav>

    <div class="page-wrapper">
      <div class="content">
        <h1 id='security-alerts-api'>Security alerts API</h1><h2 id='overview'>Overview</h2>
<p>You review alert notifications and manage alert rules using the <a href="https://support.code42.com/Administrator/Cloud/Code42_console_reference/Alerts_reference">Alerts menu of the Code42 console</a>. To automate the process of viewing alert notifications, adding notes, or opening or dismissing alert notifications, you can write scripts that use the <a href="/sandbox/api/#tag/Rules">Rules APIs</a> and <a href="/sandbox/api/#tag/Alerts">Alerts APIs</a>. This article introduces those APIs and shows examples of their use.</p>
<h2 id='considerations'>Considerations</h2>
<ul>
<li>The tasks in this article require use of the Code42 API. For assistance with using the Code42 API, contact your Customer Success Manager (CSM) to engage the Code42 Professional Services team. Or, <a href="https://success.code42.com/home">post your question to the Code42 community</a> to get advice from fellow Code42 administrators.</li>
<li>The examples in this article use <a href="https://curl.se/">curl</a>. For other tools that you can use, see <a href="https://support.code42.com/Administrator/Cloud/Monitoring_and_managing/Code42_API_resources/Tools_for_interacting_with_the_Code42_API">Tools for interacting with the Code42 API</a>.</li>
<li>To perform tasks in this article, you must:

<ul>
<li>Have the <a href="https://support.code42.com/Administrator/Cloud/Monitoring_and_managing/Roles_reference#Customer_Cloud_Admin">Customer Cloud Admin</a> or <a href="https://support.code42.com/Administrator/Cloud/Monitoring_and_managing/Roles_reference#Security_Center_User">Security Center User</a> role.</li>
<li>Know the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Obtain an <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a> and a <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
</ul></li>
<li>You can also use the Code42 command-line interface (CLI) to work with alert notifications and rules. For more information, see the <a href="https://clidocs.code42.com/en/latest/commands/alerts.html">Code42 CLI documentation</a>.</li>
</ul>
<h2 id='manage-alert-notifications'>Manage alert notifications</h2>
<p>To work with alert notifications, use the API query commands to search for alert notifications. Once you <a href="#locate-alert-rule-ids">identify specific alert IDs</a>, you can then add a note, dismiss, or reopen those alert notifications.</p>
<h3 id='search-for-alert-notifications-by-alert-filter-criteria'>Search for alert notifications by alert filter criteria</h3>
<p>To search for alert notifications using filter criteria and identify alert IDs, use the <a href="/sandbox/api/#operation/Alerts_QueryAlert">/v1/alerts/query-alerts</a> API command.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alerts/query-alerts"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: text/plain"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "tenantId": "&lt;SampleTenant&gt;", "groups": [ { "filters": [ { "term": "&lt;FilterType&gt;", "operator": "&lt;OperatorValue&gt;", "value": "&lt;Criteria&gt;" } ], "filterClause": "AND" } ], "groupClause": "OR", "pgSize": "20", "pgNum": "0", "srtKey": "CreatedAt", "srtDirection": "DESC" }'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleTenant&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
<li>Replace <code>&lt;FilterType&gt;</code> with the filter, <code>&lt;OperatorValue&gt;</code> with the operator option, and <code>&lt;Criteria&gt;</code> with the search term to use in the search. See <a href="#filter-syntax-for-the-query-alerts-API-command">Filter syntax for the query-alerts API command</a> below for details.</li>
</ul>

<p>A successful response returns basic information about the alert notifications that match your search criteria, including the alert IDs of those notifications (look for the <code>&quot;id&quot;:&quot;value&quot;</code> entry):</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ALERT_QUERY_RESPONSE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ALERT_SUMMARY"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tenantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FED_ENDPOINT_EXFILTRATION"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Departing employee endpoint exfiltration system rule"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"System rule for departing employee endpoint exfiltration."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"actor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"burt.morales@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N/A"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HIGH"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ruleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789424242"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ruleSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Departing Employee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"987654321424242"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-03T15:21:44.6139300Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"totalCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"problems"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='search-for-multiple-alert-notifications-by-alert-ids'>Search for multiple alert notifications by alert IDs</h3>
<p>After you&#39;ve located the alert IDs for specific alerts, use the <a href="/sandbox/api/#operation/Alerts_QueryAlertDetails">/v1/alerts/query-details</a> API command to search those IDs and view more details about those alert notifications.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alerts/query-details"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: text/plain"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "alertIds": [ "&lt;SampleAlertID1&gt;", "&lt;SampleAlertID2&gt;" ]}'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleAlertID1&gt;</code> and <code>&lt;SampleAlertID2&gt;</code> with the IDs of the alert notifications. Enclose each ID in quotation marks and separate them with commas.</li>
</ul>

<p>A successful response returns full details about the alert notifications, including a list of files involved in the activity.</p>
<div class="highlight"><pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"type$"</span>: <span class="s2">"ALERT_DETAILS_RESPONSE"</span>,
  <span class="s2">"alerts"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"type$"</span>: <span class="s2">"ALERT_DETAILS"</span>,
      <span class="s2">"tenantId"</span>: <span class="s2">"123456"</span>,
      <span class="s2">"type"</span>: <span class="s2">"FED_ENDPOINT_EXFILTRATION"</span>,
      <span class="s2">"name"</span>: <span class="s2">"Departing employee endpoint exfiltration system rule"</span>,
      <span class="s2">"description"</span>: <span class="s2">"System rule for departing employee endpoint exfiltration."</span>,
      <span class="s2">"actor"</span>: <span class="s2">"burt.morales@example.com"</span>,
      <span class="s2">"target"</span>: <span class="s2">"N/A"</span>,
      <span class="s2">"severity"</span>: <span class="s2">"HIGH"</span>,
      <span class="s2">"ruleId"</span>: <span class="s2">"123456789424242"</span>,
      <span class="s2">"ruleSource"</span>: <span class="s2">"Departing Employee"</span>,
      <span class="s2">"id"</span>: <span class="s2">"987654321424242"</span>,
      <span class="s2">"createdAt"</span>: <span class="s2">"2020-04-08T13:50:25.3644410Z"</span>,
      <span class="s2">"state"</span>: <span class="s2">"OPEN"</span>,
      <span class="s2">"observations"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"type$"</span>: <span class="s2">"OBSERVATION"</span>,
          <span class="s2">"id"</span>: <span class="s2">"112233445566"</span>,
          <span class="s2">"observedAt"</span>: <span class="s2">"2020-04-08T13:40:00.0000000Z"</span>,
          <span class="s2">"type"</span>: <span class="s2">"FedEndpointExfiltration"</span>,
          <span class="s2">"data"</span>: <span class="s2">"{</span><span class="se">\"</span><span class="s2">type</span><span class="nv">$\</span><span class="s2">"</span>:<span class="se">\"</span>OBSERVED_ENDPOINT_ACTIVITY<span class="se">\"</span>,<span class="se">\"</span><span class="nb">id</span><span class="se">\"</span>:<span class="se">\"</span>665544332211<span class="se">\"</span>,<span class="se">\"</span>sources<span class="se">\"</span>:[<span class="se">\"</span>Endpoint<span class="se">\"</span><span class="o">]</span>,<span class="se">\"</span>exposureTypes<span class="se">\"</span>:[<span class="se">\"</span>ApplicationRead<span class="se">\"</span>,<span class="se">\"</span>CloudStorage<span class="se">\"</span><span class="o">]</span>,<span class="se">\"</span>firstActivityAt<span class="se">\"</span>:<span class="se">\"</span>2020-04-08T13:40:00.0000000Z<span class="se">\"</span>,<span class="se">\"</span>lastActivityAt<span class="se">\"</span>:<span class="se">\"</span>2020-04-08T13:45:00.0000000Z<span class="se">\"</span>,<span class="se">\"</span>fileCount<span class="se">\"</span>:2,<span class="se">\"</span>totalFileSize<span class="se">\"</span>:311096,<span class="se">\"</span>fileCategories<span class="se">\"</span>:[<span class="o">{</span><span class="se">\"</span><span class="nb">type</span><span class="nv">$\</span><span class="s2">":</span><span class="se">\"</span><span class="s2">OBSERVED_FILE_CATEGORY</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">category</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Image</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">fileCount</span><span class="se">\"</span><span class="s2">:2,</span><span class="se">\"</span><span class="s2">totalFileSize</span><span class="se">\"</span><span class="s2">:311096,</span><span class="se">\"</span><span class="s2">isSignificant</span><span class="se">\"</span><span class="s2">:false}],</span><span class="se">\"</span><span class="s2">files</span><span class="se">\"</span><span class="s2">:[{</span><span class="se">\"</span><span class="s2">type</span><span class="nv">$\</span><span class="s2">"</span>:<span class="se">\"</span>OBSERVED_FILE<span class="se">\"</span>,<span class="se">\"</span>eventId<span class="se">\"</span>:<span class="se">\"</span>998877665544<span class="se">\"</span>,<span class="se">\"</span>path<span class="se">\"</span>:<span class="se">\"</span>C:/Users/burt.morales/<span class="se">\"</span>,<span class="se">\"</span>name<span class="se">\"</span>:<span class="se">\"</span>1586353274_family_photo.png<span class="se">\"</span>,<span class="se">\"</span>category<span class="se">\"</span>:<span class="se">\"</span>Image<span class="se">\"</span><span class="o">}</span>,<span class="o">{</span><span class="se">\"</span><span class="nb">type</span><span class="nv">$\</span><span class="s2">":</span><span class="se">\"</span><span class="s2">OBSERVED_FILE</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">eventId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">334455667788</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">path</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">C:/Users/burt.morales/Dropbox/</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1586353274_family_photo.png</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">category</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Image</span><span class="se">\"</span><span class="s2">}],</span><span class="se">\"</span><span class="s2">syncToServices</span><span class="se">\"</span><span class="s2">:[</span><span class="se">\"</span><span class="s2">Dropbox</span><span class="se">\"</span><span class="s2">],</span><span class="se">\"</span><span class="s2">sendingIpAddresses</span><span class="se">\"</span><span class="s2">:[</span><span class="se">\"</span><span class="s2">192.0.2.0</span><span class="se">\"</span><span class="s2">]}"</span>
        <span class="o">}</span>
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre></div><h3 id='search-for-a-single-notification-by-alert-id'>Search for a single notification by alert ID</h3>
<p>Use the <a href="/sandbox/api/#operation/Alerts_QueryAlertDetailsAggregate">/v1/alerts/query-details-aggregate</a> API command to search for a single alert notification using its alert ID.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alerts/query-details-aggregate"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: text/plain"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "alertId": "&lt;SampleAlertID&gt;"}'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleAlertID&gt;</code> with the alert ID.</li>
</ul>

<p>A successful response returns full details about the alert notification with all file activity aggregated into a single Observation value.</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ALERT_DETAILS_IN_AGGREGATE_RESPONSE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alert"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ALERT_DETAILS_AGGREGATE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tenantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FED_ENDPOINT_EXFILTRATION"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Departing employee endpoint exfiltration system rule"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"System rule for departing employee endpoint exfiltration."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"burt.morales@c42se.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N/A"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HIGH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ruleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567894242"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ruleSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Departing Employee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9876543214242"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-08T13:50:25.3644410Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"observation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OBSERVATION_AGGREGATE"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"observedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-08T13:40:00.0000000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FedEndpointExfiltration"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">type$</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">OBSERVED_ENDPOINT_ACTIVITY</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">112233445566</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">sources</span><span class="se">\"</span><span class="s2">:[</span><span class="se">\"</span><span class="s2">Endpoint</span><span class="se">\"</span><span class="s2">],</span><span class="se">\"</span><span class="s2">exposureTypes</span><span class="se">\"</span><span class="s2">:[</span><span class="se">\"</span><span class="s2">ApplicationRead</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">CloudStorage</span><span class="se">\"</span><span class="s2">],</span><span class="se">\"</span><span class="s2">firstActivityAt</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">2020-04-08T13:40:00.0000000Z</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">lastActivityAt</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">2020-04-08T13:45:00.0000000Z</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">fileCount</span><span class="se">\"</span><span class="s2">:2,</span><span class="se">\"</span><span class="s2">totalFileSize</span><span class="se">\"</span><span class="s2">:311096,</span><span class="se">\"</span><span class="s2">fileCategories</span><span class="se">\"</span><span class="s2">:[{</span><span class="se">\"</span><span class="s2">type$</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">OBSERVED_FILE_CATEGORY</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">category</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Image</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">fileCount</span><span class="se">\"</span><span class="s2">:2,</span><span class="se">\"</span><span class="s2">totalFileSize</span><span class="se">\"</span><span class="s2">:311096,</span><span class="se">\"</span><span class="s2">isSignificant</span><span class="se">\"</span><span class="s2">:false}],</span><span class="se">\"</span><span class="s2">files</span><span class="se">\"</span><span class="s2">:[{</span><span class="se">\"</span><span class="s2">type$</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">OBSERVED_FILE</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">eventId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">998877665544</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">path</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">C:/Users/burt.morales/</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1586353274_family_photo.png</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">category</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Image</span><span class="se">\"</span><span class="s2">},{</span><span class="se">\"</span><span class="s2">type$</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">OBSERVED_FILE</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">eventId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">334455667788</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">path</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">C:/Users/burt.morales/Dropbox/</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1586353274_family_photo.png</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">category</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Image</span><span class="se">\"</span><span class="s2">}],</span><span class="se">\"</span><span class="s2">syncToServices</span><span class="se">\"</span><span class="s2">:[</span><span class="se">\"</span><span class="s2">Dropbox</span><span class="se">\"</span><span class="s2">],</span><span class="se">\"</span><span class="s2">sendingIpAddresses</span><span class="se">\"</span><span class="s2">:[</span><span class="se">\"</span><span class="s2">192.0.2.0</span><span class="se">\"</span><span class="s2">],</span><span class="se">\"</span><span class="s2">isRemoteActivity</span><span class="se">\"</span><span class="s2">:false}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='add-a-note-to-an-alert-notification'>Add a note to an alert notification</h3>
<p>To add a note to an alert notification, first locate its alert ID using one of the queries above. Then use the <a href="/sandbox/api/#operation/Alerts_AddNoteToAlert">/v1/alerts/add-note</a> API command to add a note to that alert. Be aware that any note you add overwrites any existing note attached to the alert.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alerts/add-note"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: application/json"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "tenantId": "&lt;SampleTenant&gt;", "alertId": "&lt;SampleAlertID&gt;", "note": "This is an example note." }'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleTenant&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
<li>Replace <code>&lt;SampleAlertID&gt;</code> with the alert ID.</li>
</ul>
<h3 id='dismiss-alert-notifications'>Dismiss alert notifications</h3>
<p>You can dismiss multiple alert notifications at once using the API. To dismiss alert notifications, first locate the alert IDs using one of the queries above. Then use the <a href="/sandbox/api/#operation/Alerts_UpdateAlertState">/v1/alerts/update-state</a> API command with a <code>state</code> value of <code>RESOLVED</code> to dismiss those alerts.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alerts/update-state"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: application/json"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "tenantId": "&lt;SampleTenant&gt;", "alertIds": [ "&lt;SampleAlertID1&gt;", "&lt;SampleAlertID2&gt;" ], "state": "RESOLVED", "note": "This is an example note."}'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleTenant&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
<li>Replace <code>&lt;SampleAlertID1&gt;</code> and <code>&lt;SampleAlertID2&gt;</code> with the IDs of the alert notifications. Enclose each ID in quotation marks and separate them with commas.</li>
<li>Be aware that any note you enter overwrites any existing note attached to the alert. If you want to dismiss the alert without adding a note (or want to preserve existing notes), delete the &quot;note&quot; term and sample text from the command.</li>
</ul>
<h3 id='reopen-dismissed-alert-notifications'>Reopen dismissed alert notifications</h3>
<p>You can reopen multiple dismissed alert notifications at once using the API. To reopen alert notifications, first locate the alert IDs using one of the queries above. Then use the <a href="/sandbox/api/#operation/Alerts_UpdateAlertState">/v1/alerts/update-state</a> API command with the OPEN state value to reopen those alerts.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alerts/update-state"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: application/json"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "tenantId": "&lt;SampleTenant&gt;", "alertIds": [ "&lt;SampleAlertID1&gt;", "&lt;SampleAlertID2&gt;" ], "state": "OPEN", "note": "This is an example note."}'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleTenant&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
<li>Replace <code>&lt;SampleAlertID1&gt;</code> and <code>&lt;SampleAlertID2&gt;</code> with the IDs of the alert notifications. Enclose each ID in quotation marks and separate them with commas.</li>
<li>Be aware that any note you enter overwrites any existing note attached to the alert. If you want to reopen the alert without adding a note (or want to preserve existing notes), delete the &quot;note&quot; term and sample text from the command.</li>
</ul>
<h2 id='manage-alert-rule-user-lists'>Manage alert rule user lists</h2>
<p>If a rule either applies only to specific users or applies to all users except specific users, you can manage the users in those inclusion or exclusion lists using the API. As with alert notifications, you&#39;ll need to identify the rule ID associated with the rule before you can manage the users to which it applies.</p>
<h3 id='locate-alert-rule-ids'>Locate alert rule IDs</h3>
<p>Before you can manage the users associated with an alert rule, you need to view details about alert rules and identify the rule IDs for which you want to manage users. Use the <a href="/sandbox/api/#operation/Rules_QueryRuleMetadata">/v1/alerts/rules/query-rule-metadata</a> API command to locate alert rule IDs.</p>

<p><strong>Note:</strong> The API commands for alert notification searches described above also include the ID of the rule that generated the alert. Look for the &quot;ruleID&quot;: <code>&quot;&lt;value&gt;&quot;</code> entry in the details returned by the query.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alerts/rules/query-rule-metadata"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: text/plain"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "tenantId": "&lt;SampleTenant&gt;", "groups": [ { "filters": [ { "term": "&lt;FilterTerm&gt;", "operator": "&lt;OperatorValue&gt;", "value": "&lt;Criteria&gt;" } ], "filterClause": "AND" } ], "groupClause": "OR", "pgSize": "20", "pgNum": "0", "srtKey": "CreatedAt", "srtDirection": "DESC"}'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleTenant&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
<li>Replace <code>&lt;FilterType&gt;</code> with the filter, <code>&lt;OperatorValue&gt;</code> with the operator option, and <code>&lt;Criteria&gt;</code> with the search term to use in the search. See <a href="#filter-syntax-for-the-rules/query-rule-metadata-API-command">Filter syntax for the rules/query-rule-metadata API command</a> below for details.</li>
</ul>

<p>A successful response returns basic information about the alert notifications that match your search criteria, including the rule IDs of those notifications (look for the &quot;observerRuleId&quot;:&quot;value&quot; entry):</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RULE_METADATA_SEARCH_RESPONSE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ruleMetadata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RULE_METADATA"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"modifiedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Code42"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"modifiedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-04T21:07:03.5417950Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Exposure on an endpoint"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This default rule alerts you when departing employees move data from an endpoint."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HIGH"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"isSystem"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"isEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ruleSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Departing Employee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tenantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"observerRuleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567894242"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FED_ENDPOINT_EXFILTRATION"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9876543214242"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Code42"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-10T12:16:40.7765970Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"totalCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
  </span><span class="nl">"problems"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='view-an-alert-rule-39-s-user-list'>View an alert rule&#39;s user list</h3>
<p>Use the <a href="/sandbox/api/#operation/Rules_QueryUsersOnRule">/v1/alert-rules/query-users</a> API command to view a list of users that are either included in or excluded from a specific alert rule. The output from this command groups the user email addresses and cloud aliases in the rule&#39;s inclusion or exclusion list by the user ID associated with those details (which is generally the <a href="/sandbox/intro-to-developer-portal/#get-useruid">userUID value in Code42</a>). You can then use this user ID to remove specific email addresses and cloud aliases from a rule&#39;s inclusion or exclusion list as needed.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alert-rules/query-users"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: text/plain"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "tenantId": "&lt;SampleTenant&gt;", "ruleId": "&lt;SampleRuleID&gt;"}'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleTenant&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
<li>Replace <code>&lt;SampleRuleID&gt;</code> with the ID of the alert rule for which you want to view users.</li>
</ul>

<p>A successful response lists the email addresses and cloud aliases of the users in the alert rule&#39;s inclusion or exclusion list, grouped by the user ID value (identified by the &quot;userIdFromAuthority&quot; label) associated with that information. The &quot;usersToAlertOn&quot; label identifies whether the rule applies only to the specified users in an inclusion list (<code>SPECIFIED_USERS</code>), to all users except the specified users in an exclusion list (<code>ALL_USERS_NOT_SPECIFIED</code>), or to all users (<code>ALL_USERS</code>).</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USERS_IN_RULE_RESPONSE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_BAG"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userIdFromAuthority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"947210378478595410"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userAliasList"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"SCassidy"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"SeanCassidy"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sean.cassidy@example.com"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"usersToAlertOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SPECIFIED_USERS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>If a user ID was not provided when users were added to the alert rule (as is common when users are added using the Code42 command-line interface or manually with <a href="https://support.code42.com/Administrator/Cloud/Code42_console_reference/Alerts_reference">Alerts in the Code42 console</a>), the results note that the &quot;userIdFromAuthority&quot; value is null. To work with an alert rule&#39;s inclusion or exclusion list if the user ID value is null, use the <a href="https://support.code42.com/Administrator/Cloud/Code42_console_reference/Alerts_reference#Review_Alerts">Alerts screens in the Code42 console</a> to manually add and remove users. Alternately, you can use the <a href="/sandbox/api/#operation/Rules_RemoveAllUsersFromRule">/v1/alert-rules/remove-all-users</a> API command to remove all email addresses and aliases from a rule, and then re-add user information to that rule using the <a href="/sandbox/api/#operation/Rules_AddUsersToRule">/v1/alert-rules/add-users</a> using the <a href="/sandbox/intro-to-developer-portal/#get-useruid">users&#39; userUID in Code42</a>.</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USERS_IN_RULE_RESPONSE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type$"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_BAG"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userIdFromAuthority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Null UserIdFromAuthority.  These usernames must be edited in the web app."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userAliasList"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"burt.morales@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"astrid.ludwig@example.com"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"usersToAlertOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SPECIFIED_USERS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='add-users-to-an-alert-rule'>Add users to an alert rule</h3>
<p>If the rule applies to specific users, or if it applies to all users except specific users, you can add users to those inclusion or exclusion lists with the <a href="/sandbox/api/#operation/Rules_AddUsersToRule">/v1/alert-rules/add-users</a> API command. You cannot add users to rules that monitor all users.</p>

<p><strong>Note:</strong> You cannot use these alerts APIs to add or remove users from the inclusion or exclusion lists of default rules created by the Departing Employees list or High Risk Employees list. Instead, users are added to and removed from these lists directly in the <a href="https://support.code42.com/Administrator/Cloud/Code42_console_reference/Departing_Employees_reference">Departing Employees list</a> and <a href="https://support.code42.com/Administrator/Cloud/Code42_console_reference/High_Risk_Employees_reference">High Risk Employees list</a> or with the <a href="/sandbox/detection-list-management-api/#detection-list-management-api">Detection List Management API</a>.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alert-rules/add-users"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: application/json"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "tenantId": "&lt;SampleTenant&gt;", "ruleId": "&lt;SampleRuleId&gt;", "userList": [ { "userIdFromAuthority": "&lt;SampleUserUID&gt;", "userAliasList": [ "&lt;SampleAlias1&gt;", "&lt;SampleAlias2&gt;" ] } ]}'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleTenant&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
<li>Replace <code>&lt;SampleRuleID&gt;</code> with the ID of the alert rule from which you want to remove users.</li>
<li>Replace <code>&lt;SampleUserID&gt;</code> with a value that uniquely identifies the user you want to add. As a best practice, use <a href="/sandbox/intro-to-developer-portal/#get-useruid">the user&#39;s userUID in Code42</a> for this value.</li>
<li>The <code>userAliasList</code> parameter identifies the list of email addresses or cloud aliases to associate with that <code>&lt;SampleUserID&gt;</code>. Replace <code>&lt;SampleAlias1&gt;</code> and <code>&lt;SampleAlias2&gt;</code> with the email addresses or cloud aliases you want to add to the rule&#39;s inclusion or exclusion list for that user ID.

<ul>
<li>If you want to enter only one email address or cloud alias, use this construction: <code>&quot;userAliasList&quot;: [ &quot;&lt;SampleAlias1&gt;&quot; ]</code></li>
<li>If you want to enter multiple email addresses or cloud aliases for that user ID, enclose each ID in quotation marks and separate them with commas.</li>
</ul></li>
</ul>

<p>The aliases that you enter here become the values that are added to the rule&#39;s inclusion or exclusion list and used to trigger or filter alert notifications.</p>
<h3 id='remove-specific-users-from-an-alert-rule'>Remove specific users from an alert rule</h3>
<p>You can also remove users&#39; email addresses or cloud aliases from an alert rule&#39;s inclusion or exclusion list with the <a href="/sandbox/api/#operation/Rules_RemoveUsersFromRule">/v1/alert-rules/remove-users</a> API command. This command removes all of the email addresses or cloud aliases associated with the user&#39;s ID from the specified rule. You cannot remove users from rules that monitor all users.</p>

<p><strong>Note:</strong> You cannot use these alerts APIs to add or remove users from the inclusion or exclusion lists of <a href="https://support.code42.com/Administrator/Cloud/Monitoring_and_managing/How_to_create_a_security_alert#Default_alert_rules_and_notifications">default rules</a> created by the Departing Employees list or High Risk Employees list. Instead, users are added to and removed from these lists directly in the <a href="https://support.code42.com/Administrator/Cloud/Monitoring_and_managing/Add_departing_employees">Departing Employees list</a> and <a href="https://support.code42.com/Administrator/Cloud/Monitoring_and_managing/Add_high_risk_employees">High Risk Employees list</a> or with the <a href="/sandbox/detection-list-management-api/#detection-list-management-api">Detection List Management API</a>.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alert-rules/remove-users"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: application/json"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "tenantId": "&lt;SampleTenant&gt;", "ruleId": "&lt;SampleRuleID&gt;", "userIdList": [ "&lt;SampleUserUID&gt;" ]}'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleTenant&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
<li>Replace <code>&lt;SampleRuleID&gt;</code> with the ID of the alert rule from which you want to remove users.</li>
<li>Replace <code>&lt;SampleUserUID&gt;</code> with the value that uniquely identifies the alias list of the user you want to remove (such as the <a href="/sandbox/intro-to-developer-portal/#get-useruid">user&#39;s userUID in Code42</a>).</li>
</ul>

<p><strong>Note:</strong> The <a href="/sandbox/api/#operation/Rules_RemoveUsersFromRule">/v1/alert-rules/remove-users</a> API command uses the <code>&lt;SampleUserUID&gt;</code> value to identify the user alias list to remove from the rule. This value may not always be supplied when users are added to rules, such as when users are added via the Code42 command-line interface or manually with <a href="https://support.code42.com/Administrator/Cloud/Code42_console_reference/Alerts_reference">Alerts in the Code42 console</a>. Therefore, results from using <a href="/sandbox/api/#operation/Rules_RemoveUsersFromRule">/v1/alert-rules/remove-users</a> may not be what you expect: if no <code>&lt;SampleUserUID&gt;</code> value exists, the corresponding alias list cannot be identified and no users are removed. To resolve this issue using the API, use the <a href="/sandbox/api/#operation/Rules_RemoveAllUsersFromRule">/v1/alert-rules/remove-all-users</a> API command to remove all users from a rule&#39;s inclusion or exclusion list, then use the <a href="/sandbox/api/#operation/Rules_AddUsersToRule">/v1/alert-rules/add-users</a> API command to add user aliases that are associated with a <code>&lt;SampleUserUID&gt;</code> value.</p>
<h3 id='remove-a-user-39-s-aliases-from-an-alert-rule'>Remove a user&#39;s aliases from an alert rule</h3>
<p>Before removing user information from an alert rule&#39;s inclusion or exclusion list, use the <a href="/sandbox/api/#operation/Rules_QueryUsersOnRule">/v1/alert-rules/query-users</a> API command to identify what user information is contained in that list and whether it is associated with a user ID. After identifying the user ID associated with the email addresses or cloud aliases in a rule&#39;s inclusion or exclusion list, you can then use the <a href="/sandbox/api/#operation/Rules_RemoveUserAliasesFromRule">/v1/alert-rules/remove-user-aliases</a> API command to remove only that user information from the list.</p>

<p><strong>Note:</strong> If there are no user IDs associated with the user information in an alert rule&#39;s inclusion or exclusion list, you cannot remove specific email addresses or cloud aliases from that list with this API command. Instead, you can use one of these methods to work with a rule&#39;s user information:</p>

<ul>
<li>Use the <a href="https://support.code42.com/Administrator/Cloud/Code42_console_reference/Alerts_reference">Alerts screen in the Code42 console</a> to manually add and remove users.</li>
<li>Use the <a href="/sandbox/api/#operation/Rules_RemoveAllUsersFromRule">/v1/alert-rules/remove-all-users</a> and <a href="/sandbox/api/#operation/Rules_AddUsersToRule">/v1/alert-rules/add-users</a> API commands to remove all user information and then re-add the email addresses and cloud aliases (associated with a <a href="/sandbox/intro-to-developer-portal/#get-useruid">Code42 userUID</a> value) that you want to keep.</li>
</ul>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alert-rules/remove-user-aliases"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: application/json"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "tenantId": "&lt;SampleTenant&gt;", "ruleId": "&lt;SampleRuleID&gt;", "userList": [ { "userIdFromAuthority": "&lt;SampleUserID&gt;", "userAliasList": [ "&lt;SampleAlias1&gt;", "&lt;SampleAlias2&gt;" ] } ]}'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleTenant&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
<li>Replace <code>&lt;SampleRuleID&gt;</code> with the ID of the alert rule from which you want to remove users.</li>
<li>Replace <code>&lt;SampleUserID&gt;</code> with the value that is associated with the email addresses or cloud aliases that you want to remove.</li>
<li><p>The userAliasList parameter identifies the email addresses or cloud aliases associated with that <code>&lt;SampleUserID&gt;</code> that should be removed from the list. Replace <code>&lt;SampleAlias1&gt;</code> and <code>&lt;SampleAlias2&gt;</code> with the email addresses or cloud aliases you want to remove from the rule&#39;s inclusion or exclusion list for that user ID.</p>

<ul>
<li>If you want to remove only one email address or cloud alias, use this construction: <code>&quot;userAliasList&quot;: [ &quot;&lt;SampleAlias1&gt;&quot; ]</code></li>
</ul></li>
<li><p>If you want to remove multiple email addresses or cloud aliases for that user ID, enclose each ID in quotation marks and separate them with commas.</p>

<ul>
<li>If there are multiple email addresses or cloud aliases associated with that user ID but you want to remove only one or two, specify only the values to remove.</li>
</ul></li>
</ul>
<h3 id='remove-all-users-from-an-alert-rule'>Remove all users from an alert rule</h3>
<p>If you do not know the user ID associated with the list of email addresses or cloud aliases for a user, you can use the <a href="/sandbox/api/#operation/Rules_RemoveAllUsersFromRule">/v1/alert-rules/remove-all-users</a> API command to remove all users from an alert rule&#39;s inclusion or exclusion list. You can then use the add-users API command to rebuild those lists using known user IDs.</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"&lt;RequestURL&gt;/v1/alert-rules/remove-all-users"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"accept: application/json"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer &lt;AuthToken&gt;"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{ "tenantId": "&lt;SampleTenant&gt;", "ruleId": "&lt;SampleRuleID&gt;" }'</span>
</code></pre></div>
<p>In the preceding example:</p>

<ul>
<li>Replace <code>&lt;RequestURL&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#request-urls">request URL</a> of your Code42 cloud instance.</li>
<li>Replace <code>&lt;AuthToken&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#authentication">authentication token</a>.</li>
<li>Replace <code>&lt;SampleTenant&gt;</code> with the <a href="/sandbox/intro-to-developer-portal/#get-a-tenant-id">tenant ID</a>.</li>
<li>Replace <code>&lt;SampleRuleID&gt;</code> with the ID of the alert rule from which you want to remove all users.</li>
</ul>
<h4 id='filter-syntax-for-the-query-alerts-api-command'>Filter syntax for the query-alerts API command</h4>
<p>The <a href="/sandbox/api/#operation/Alerts_QueryAlert">/v1/alerts/query-alerts</a> API uses these filter types, operators, and criteria values to search for alert notifications.</p>

<table><thead>
<tr>
<th>Filter Type</th>
<th>Operator</th>
<th>Criteria</th>
</tr>
</thead><tbody>
<tr>
<td>DateObserved</td>
<td>On, On or after, On or before</td>
<td>Date the alert was triggered, in yyyy-MM-dd format</td>
</tr>
<tr>
<td>Actor</td>
<td>Is, Is not, Contains, Does not contain</td>
<td>The username or cloud alias (actor) of the person who caused the event, or portions thereof</td>
</tr>
<tr>
<td>Severity</td>
<td>Is, Is not</td>
<td>High, Medium, or Low</td>
</tr>
<tr>
<td>RuleName</td>
<td>Is, Is not, Contains, Does not contain</td>
<td>The name of the rule, or portions thereof</td>
</tr>
<tr>
<td>Description</td>
<td>Is, Is not, Contains, Does not contain</td>
<td>The description of the rule, or portions thereof</td>
</tr>
<tr>
<td>AlertState</td>
<td>Is, Is not</td>
<td>Open or Dismissed</td>
</tr>
<tr>
<td>AlertID</td>
<td>Is</td>
<td>The ID of a specific alert notification</td>
</tr>
</tbody></table>
<h4 id='filter-syntax-for-the-rules-query-rule-metadata-api-command'>Filter syntax for the rules/query-rule-metadata API command</h4>
<p>The <a href="/sandbox/api/#operation/Rules_QueryRuleMetadata">/v1/alerts/rules/query-rule-metadata</a> API uses these filter types, operators, and criteria values to search for alert rules.</p>

<table><thead>
<tr>
<th>Filter Type</th>
<th>Operator</th>
<th>Criteria</th>
</tr>
</thead><tbody>
<tr>
<td>TenantId</td>
<td>Is</td>
<td>The ID of your organization or tenant in Code42.</td>
</tr>
<tr>
<td>ObserverRuleId</td>
<td>Is</td>
<td>The ID of a specific alert rule.</td>
</tr>
<tr>
<td>Type</td>
<td>Is, Is not</td>
<td>The rule&#39;s exposure type (Cloud share permissions changes rules: FED_CLOUD_SHARE_PERMISSIONS), (Exposure on an endpoint rules: FED_ENDPOINT_EXFILTRATION), (Suspicious file mismatch rules: FED_FILE_TYPE_MISMATCH)</td>
</tr>
<tr>
<td>Name</td>
<td>Is, Is not, Contains, Does not contain</td>
<td>The name of the rule, or portions thereof</td>
</tr>
<tr>
<td>Description</td>
<td>Is, Is not, Contains, Does not contain</td>
<td>The description of the rule, or portions thereof</td>
</tr>
<tr>
<td>Severity</td>
<td>Is, Is not</td>
<td>High, Medium, or low</td>
</tr>
<tr>
<td>IsSystem</td>
<td>Is</td>
<td>True or False. Indicates whether the rule is a default rule created by the Departing Employee list or High Risk Employees list</td>
</tr>
<tr>
<td>IsEnabled</td>
<td>Is</td>
<td>True or False. Indicates whether the rule is enabled or disabled.</td>
</tr>
<tr>
<td>RuleSource</td>
<td>Is, Is not</td>
<td>The source that created the rule. For rules created manually: Alerting. For rules created by the Departing Employee list: Departing Employee. For rules created by the High Risk Employees list: High Risk Employee</td>
</tr>
<tr>
<td>ModifiedAt</td>
<td>On, On or after, On or before</td>
<td>Date the rule was modified, in yyyy-MM-dd format</td>
</tr>
<tr>
<td>ModifiedBy</td>
<td>Is, Is not, Contains, Does not contain</td>
<td>Username of the person who last modified the rule. For default rules created by the Departing Employee list or High Risk Employees list, use Code42 as the user name.</td>
</tr>
<tr>
<td>CreatedAt</td>
<td>On, On or after, On or before</td>
<td>Date the rule was created, in yyyy-MM-dd format</td>
</tr>
<tr>
<td>CreatedBy</td>
<td>Is, Is not, Contains, Does not contain</td>
<td>Username of the person who created the rule. For default rules created by the Departing Employee list or High Risk Employees list, use Code42 as the user name.</td>
</tr>
</tbody></table>

      </div>
    </div>
    <footer>
      © 2020 Code42 Software, Inc. All Rights Reserved.
      <a href="https://www.code42.com/terms-of-use/" target="_blank">Terms of use</a>
      <a href="https://www.code42.com/terms-of-use/" target="_blank">Privacy statement</a>
    </footer>
  </body>
</html>
